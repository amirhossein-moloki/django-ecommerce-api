# Hypex eCommerce API (Backend)

<div align="center">
  <img src="https://raw.githubusercontent.com/amirhossein-moloki/django-ecommerce-api/main/docs/images/logo.png" alt="Hypex Logo" width="150"/>
  <p><strong>ุจฺฉโุงูุฏ ุฌุงูุน ู ููุงุณโูพุฐุฑ ุจุฑุง ูพูุชูุฑูโูุง ุชุฌุงุฑุช ุงูฺฉุชุฑููฺฉุ ุชูุณุนู ุฏุงุฏู ุดุฏู ุจุง Django REST Framework</strong></p>
</div>

[![Build Status](https://img.shields.io/github/actions/workflow/status/amirhossein-moloki/django-ecommerce-api/ci.yml?style=for-the-badge)](https://github.com/amirhossein-moloki/django-ecommerce-api/actions)
[![Code Coverage](https://img.shields.io/codecov/c/github/amirhossein-moloki/django-ecommerce-api?style=for-the-badge)](https://codecov.io/gh/amirhossein-moloki/django-ecommerce-api)
[![License](https://img.shields.io/github/license/amirhossein-moloki/django-ecommerce-api?style=for-the-badge)](LICENSE)
[![Language](https://img.shields.io/github/languages/top/amirhossein-moloki/django-ecommerce-api?style=for-the-badge)](https://github.com/amirhossein-moloki/django-ecommerce-api)

---

**Hypex** ฺฉ API ุจฺฉโุงูุฏ ุขูุงุฏู ุจุฑุง ูุญุท ูพุฑูุฏุงฺฉุดู ุงุณุช ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ **ุฌูฺฏู** ู **Django REST Framework (DRF)** ุณุงุฎุชู ุดุฏู ุงุณุช. ุงู ูพุฑูฺู ุจุง ุงุฑุงุฆู ูุงฺููโูุง ุงุตู ฺฉ ูุฑูุดฺฏุงู ุขููุงูุ ุฒุฑุณุงุฎุช ูุฏุฑุชููุฏ ู ูุงุจู ุชูุณุนู ุจุฑุง ุณุงุฎุช ุณุฑุน ูพูุชูุฑูโูุง ุชุฌุงุฑุช ุงูฺฉุชุฑููฺฉ ูุฑุงูู ูโฺฉูุฏ.

## โจ ูฺฺฏโูุง ฺฉูุฏ

ุงู ูพุฑูฺู ูุฌููุนูโุง ฺฉุงูู ุงุฒ ูุงุจูุชโูุง ููุฑุฏ ูุงุฒ ฺฉ ูุฑูุดฺฏุงู ุขููุงู ูุฏุฑู ุฑุง ูพูุดุด ูโุฏูุฏ:

- **ูุงฺูู ูุฑูุดฺฏุงู (Shop):**
  - ูุฏุฑุช ูุญุตููุงุชุ ุฏุณุชูโุจูุฏโูุง ู ุชฺฏโูุง
  - ุงููุงุน ูุฎุชูู ูุญุตูู (Product Variants)
  - ุณุณุชู ูุธุฑุงุช ู ุงูุชุงุฒุฏู ฺฉุงุฑุจุฑุงู
  - ููุชูุฑ ูพุดููุงุฏ ูุญุตูู (Product Recommendation)

- **ูุฏุฑุช ฺฉุงุฑุจุฑุงู (Account):**
  - ุงุญุฑุงุฒ ููุช ูุจุชู ุจุฑ **JWT** (Access & Refresh Tokens)
  - ูุฑูุฏ ุจุง ุดูุงุฑู ููุจุงู ู ฺฉุฏ ุชุงุฏ **(OTP)** ุจุง ุณุฑูุณ SMS.ir
  - ูุฑูุฏ ุงุฒ ุทุฑู ุดุจฺฉูโูุง ุงุฌุชูุงุน **(Google OAuth2)**
  - ูพุฑููุงู ฺฉุงุฑุจุฑ ู ุชุงุฑุฎฺู ุณูุงุฑุดุงุช

- **ุณุจุฏ ุฎุฑุฏ ู ุณูุงุฑุดุงุช (Cart & Orders):**
  - ุณุจุฏ ุฎุฑุฏ ูพุงุฏุงุฑ ุจุฑุง ฺฉุงุฑุจุฑุงู ูููุงู ู ุซุจุชโูุงู ฺฉุฑุฏู
  - ูุฑุขูุฏ ฺฉุงูู ุซุจุช ุณูุงุฑุด
  - ูุฏุฑุช ูุถุนุช ุณูุงุฑุดุงุช (ูพุฑุฏุงุฎุช ุดุฏูุ ุฏุฑ ุญุงู ุงุฑุณุงูุ ุชุญูู ุดุฏู ู...)

- **ูพุฑุฏุงุฎุช (Payment):**
  - ฺฉูพุงุฑฺฺฏ ุจุง ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุขููุงู **ุฒุจุงู (Zibal)**
  - ูุงฺฏ ฺฉุงูู ุชุฑุงฺฉูุดโูุง ุจุฑุง ุญุณุงุจุฑุณ ู ูพฺฏุฑ

- **ุชุฎููโูุง ู ุจุงุฒุงุฑุงุจ:**
  - ุณุณุชู ฺฉุฏูุง ุชุฎูู (Coupons)
  - ูุงฺูู ุชุฎููโูุง ูพุดุฑูุชู ู ุดุฑุท (Discounts)
  - ฺฉูพุงุฑฺฺฏ ุจุง ุณุฑูุณโูุง ููุงุณู ููุช **ุชุฑุจ ู ุงูุงูุฒ**

- **ุญูู ู ููู (Shipping):**
  - ฺฉูพุงุฑฺฺฏ ุจุง ุณุฑูุณ ุญูู ู ููู **ูพุณุชฺฉุณ (Postex)**
  - ุฏุฑุงูุช ูุฑุฎ ุญูู ู ููู ู ุซุจุช ุณูุงุฑุด ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ

- **ูฺฺฏโูุง ูพุดุฑูุชู:**
  - **ฺุช ุฒูุฏู** ุจู ฺฉุงุฑุจุฑุงู ู ูพุดุชุจุงู ุจุง Django Channels
  - **ูุธุงู ูพุณโุฒููู (Background Tasks)** ุจุง Celery ุจุฑุง ุงุฑุณุงู ุงููุ ูพุฑุฏุงุฒุดโูุง ู...
  - **ฺฉุดูฺฏ (Caching)** ุจุง Redis ุจุฑุง ุงูุฒุงุด ฺุดูฺฏุฑ ุณุฑุนุช API
  - **ูุณุชูุฏุงุช API ุฎูุฏฺฉุงุฑ** ุจุง Swagger (OpenAPI) ู ReDoc
  - **ูุงูุชูุฑูฺฏ ู ูุชุฑฺฉโูุง** ุจุง Prometheus
  - ูุจูุงฺฏ ู ูุฏุฑุช ูุญุชูุง

## ๐๏ธ ูพุดุชู ููุงูุฑ (Tech Stack)

| ุฏุณุชู          | ุชฺฉููููฺ                                                                        |
|---------------|---------------------------------------------------------------------------------|
| **Backend**   | Django, Django REST Framework                                                   |
| **Database**  | PostgreSQL                                                                      |
| **Cache**     | Redis                                                                           |
| **Async Tasks**| Celery, Redis (Broker)                                                          |
| **Real-time** | Django Channels                                                                 |
| **Container** | Docker, Docker Compose                                                          |
| **Web Server**| Nginx (Production), Gunicorn                                                    |
| **API Docs**  | drf-spectacular (OpenAPI 3)                                                     |
| **Testing**   | Pytest, Factory Boy, Coverage.py                                                |

---

## ๐ ุฑุงูโุงูุฏุงุฒ ุณุฑุน ู ุขุณุงู ุจุง ุฏุงฺฉุฑ

ุงู ูพุฑูฺู ุจุฑุง ุงุฌุฑุง ุฏุฑ ูุญุทโูุง ุชูุณุนู ู ูพุฑูุฏุงฺฉุดู ุจุง ุงุณุชูุงุฏู ุงุฒ Docker ู Docker Compose ุจููู ุดุฏู ุงุณุช.

### ฑ. ูพุดโูุงุฒูุง
- [Docker Engine](https://docs.docker.com/engine/install/)
- [Docker Compose](https://docs.docker.com/compose/install/)

### ฒ. ุขูุงุฏูโุณุงุฒ ุงููู

ุงุจุชุฏุง ูพุฑูฺู ุฑุง ุงุฒ ฺฏุชโูุงุจ ฺฉููู ฺฉูุฏ ู ูุงุฑุฏ ูพูุดู ุขู ุดูุฏ:
```bash
git clone https://github.com/amirhossein-moloki/django-ecommerce-api.git
cd django-ecommerce-api
```

ุณูพุณุ ูุงู ูุชุบุฑูุง ูุญุท ุฑุง ุงุฒ ุฑู ููููู ุจุณุงุฒุฏ:
```bash
cp .env.example .env
```
> **ูฺฉุชู ุจุณุงุฑ ููู:** ูุงู `.env` ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ููุงุฏุฑ ููุฑุฏ ูุงุฒ ุฎูุฏ ุฑุง (ูุงููุฏ ฺฉูุฏูุง API ุณุฑูุณโูุง ุง ุชูุธูุงุช ุฏุชุงุจุณ) ุฏุฑ ุขู ูุฑุงุฑ ุฏูุฏ. ุจุฏูู ุงู ูุฑุญููุ ุจุฑูุงูู ุงุฌุฑุง ูุฎูุงูุฏ ุดุฏ.

### ณ. ุฑุงูโุงูุฏุงุฒ ูุญุท ุชูุณุนู (Development)

ูุญุท ุชูุณุนู ุจุง ุงุณุชูุงุฏู ุงุฒ `docker-compose.yml` ุฑุงูโุงูุฏุงุฒ ูโุดูุฏ ู ุฏุงุฑุง ูุงุจูุช **hot-reloading** ุงุณุชุ ุนู ูุฑ ุชุบุฑ ุฏุฑ ฺฉุฏูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุณุฑูุฑ ุฑุง ุฑโุงุณุชุงุฑุช ูโฺฉูุฏ. ุงู ูุญุท ุดุงูู ุชูุงู ุณุฑูุณโูุง ูุงุฒู ุงุฒ ุฌููู **PostgreSQL** ู **Redis** ุงุณุช.

ุจุฑุง ุณุงุฎุช ุงูุฌโูุง ู ุงุฌุฑุง ฺฉุงูุชูุฑูุงุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
docker compose up --build
```
ูพุณ ุงุฒ ุงุฌุฑุง ููููุ ุณุฑูุณโูุง ุฏุฑ ุขุฏุฑุณโูุง ุฒุฑ ุฏุฑ ุฏุณุชุฑุณ ุฎูุงููุฏ ุจูุฏ:

- **ุฑุดู API:** `http://localhost:8000/api/v1/` (ุชูุงู Endpoints ุฒุฑ ุงู ุขุฏุฑุณ ูุฑุงุฑ ุฏุงุฑูุฏ)
- **ูพูู ูุฏุฑุช ุฌูฺฏู:** `http://localhost:8000/admin/`
- **ูุณุชูุฏุงุช Swagger UI:** `http://localhost:8000/api/schema/swagger-ui/`
- **ูุณุชูุฏุงุช ReDoc:** `http://localhost:8000/api/schema/redoc/`
- **ูุงูุชูุฑูฺฏ Celery (Flower):** `http://localhost:5555/`

### ด. ุฑุงูโุงูุฏุงุฒ ูุงูุชูุฑูฺฏ (ุงุฎุชุงุฑ)

ุงู ูพุฑูฺู ุดุงูู ฺฉ ูพุดุชู ูุงูุชูุฑูฺฏ ุขูุงุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ **Prometheus** ู **Grafana** ุงุณุช. ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุขูุ ุงุจุชุฏุง ุดุจฺฉู ุฏุงฺฉุฑ ููุฑุฏ ูุงุฒ ุฑุง ุงุฌุงุฏ ฺฉูุฏ:

```bash
docker network create monitoring_net
```

ุณูพุณุ ุณุฑูุณโูุง ูุงูุชูุฑูฺฏ ุฑุง ุฏุฑ ฺฉูุงุฑ ุณุฑูุณโูุง ุงุตู ูพุฑูฺู ุงุฌุฑุง ฺฉูุฏ:

```bash
docker compose -f docker-compose.yml -f docker-compose.monitoring.yml up --build -d
```

ูพุณ ุงุฒ ุงุฌุฑุง ููููุ ุณุฑูุณโูุง ุฏุฑ ุขุฏุฑุณโูุง ุฒุฑ ุฏุฑ ุฏุณุชุฑุณ ุฎูุงููุฏ ุจูุฏ:

- **Prometheus UI:** `http://localhost:9090/`
- **Grafana UI:** `http://localhost:3000/` (ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ: `admin`)

### ต. ุฑุงูโุงูุฏุงุฒ ูุญุท ูพุฑูุฏุงฺฉุดู (Production)

ูุญุท ูพุฑูุฏุงฺฉุดู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงู `docker-compose.prod.yml` ุชูุธูุงุช ูพุดโูุฑุถ ุชูุณุนู ุฑุง ุจุงุฒููุณ ูโฺฉูุฏ ู ุงุฒ `gunicorn` ุจุฑุง ุงุฌุฑุง ุจููู ุจุฑูุงูู ู `nginx` ุจู ุนููุงู ูุจโุณุฑูุฑ ู ูพุฑุงฺฉุณ ูุนฺฉูุณ ุงุณุชูุงุฏู ูโฺฉูุฏ.

ุจุฑุง ุงุฌุฑุง ูุญุท ุดุจู ุจู ูพุฑูุฏุงฺฉุดูุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
```bash
docker compose -f docker-compose.yml -f docker-compose.prod.yml up --build -d
```
> ุฏุฑ ุงู ุญุงูุชุ ุจุฑูุงูู ุงุฒ ุทุฑู ูพูุฑุช `80` (nginx) ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.

---

## โ ุชุณุช ู ฺฉูุช ฺฉุฏ

ุจุฑุง ุงุฌุฑุง ุชุณุชโูุง ุฏุฑ ูุญุท ุฏุงฺฉุฑุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
```bash
docker compose run --rm web python -m pytest
```

ุจุฑุง ุงุฌุฑุง ุชุณุชโูุง ฺฉ ุงูพูฺฉุดู ุฎุงุต (ูุซูุงู `shop`):
```bash
docker compose run --rm web python -m pytest shop/
```

ุจุฑุง ูุญุงุณุจู ุฏุฑุตุฏ ูพูุดุด ฺฉุฏ (Code Coverage):
```bash
docker compose run --rm web pytest --cov
```

---

## ๐ ูุณุชูุฏุงุช API

ูุณุชูุฏุงุช ฺฉุงูู ู ุชุนุงูู API ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ `drf-spectacular` ุชููุฏ ูโุดูุฏ ู ุงุฒ ุทุฑู ุขุฏุฑุณโูุง ุฒุฑ ูุงุจู ูุดุงูุฏู ุงุณุช:
- **Swagger UI:** `http://localhost:8000/api/v1/schema/swagger-ui/`
- **ReDoc:** `http://localhost:8000/api/v1/schema/redoc/`

---

## ๐๏ธ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
.
โโโ account/        # ูุงฺูู ฺฉุงุฑุจุฑุงูุ ุงุญุฑุงุฒ ููุช ู ูพุฑููุงู
โโโ cart/           # ููุทู ุณุจุฏ ุฎุฑุฏ
โโโ chat/           # ฺุช ุฒูุฏู ุจุง Django Channels
โโโ orders/         # ูุฏุฑุช ุณูุงุฑุดุงุช
โโโ payment/        # ฺฉูพุงุฑฺฺฏ ุจุง ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช
โโโ shipping/       # ฺฉูพุงุฑฺฺฏ ุจุง ุณุฑูุณ ุญูู ู ููู
โโโ shop/           # ูุฏุฑุช ูุญุตููุงุชุ ุฏุณุชูโุจูุฏโูุง ู ูุธุฑุงุช
โโโ sms/            # ูุงฺูู ุงุฑุณุงู ูพุงูฺฉ (OTP)
โโโ discounts/      # ุณุณุชู ุชุฎููโูุง ูพุดุฑูุชู
โโโ integrations/   # ฺฉูพุงุฑฺฺฏ ุจุง ุณุฑูุณโูุง ุซุงูุซ (ุชุฑุจุ ุงูุงูุฒ)
โโโ ecommerce_api/  # ูุงูโูุง ุงุตู ุชูุธูุงุช ูพุฑูฺู
โโโ .env.example    # ูุงู ููููู ูุชุบุฑูุง ูุญุท
โโโ Dockerfile      # ุฏุณุชูุฑุงูุนูู ุณุงุฎุช ุงูุฌ ุฏุงฺฉุฑ
โโโ docker-compose.yml # ุชูุธูุงุช ุฏุงฺฉุฑ ุจุฑุง ูุญุท ุชูุณุนู
โโโ docker-compose.prod.yml # ุชูุธูุงุช ุฏุงฺฉุฑ ุจุฑุง ูุญุท ูพุฑูุฏุงฺฉุดู
```

## ๐ก๏ธ ูฺฉุงุช ููู ุจุฑุง ูุญุท ูพุฑูุฏุงฺฉุดู

ูุจู ุงุฒ ุงุณุชูุฑุงุฑ ููุง ุจุฑูุงูู ุฏุฑ ูุญุท ูพุฑูุฏุงฺฉุดูุ ุญุชูุงู ููุงุฑุฏ ุฒุฑ ุฑุง ุจุฑุฑุณ ู ุงุนูุงู ฺฉูุฏ:

- **ุญุงูุช Debug:** ูุชุบุฑ `DEBUG=False` ุฑุง ุฏุฑ ูุงู `.env` ุชูุธู ฺฉูุฏ ุชุง ุงุฒ ูุดุช ุงุทูุงุนุงุช ุญุณุงุณ ุฌููฺฏุฑ ุดูุฏ.
- **ูุฏุฑุช ฺฉูุฏูุง ูุฎู (Secrets):** ูุฑฺฏุฒ ฺฉูุฏูุง ุญุณุงุณ (ูุงููุฏ `SECRET_KEY` ุง ฺฉูุฏูุง API) ุฑุง ุจู ุตูุฑุช ูุณุชูู ุฏุฑ ฺฉุฏ ูุฑุงุฑ ูุฏูุฏ. ุงุฒ ูฺฉุงูุฒูโูุง ุงูู ูุฏุฑุช ูุชุบุฑูุง ูุญุท ูุงููุฏ Docker Secretsุ Vault ุง ุณุฑูุณโูุง ูุดุงุจู ุงุณุชูุงุฏู ฺฉูุฏ.
- **ูุนุงูโุณุงุฒ HTTPS:** ุจุฑุง ุฑูุฒูฺฏุงุฑ ุชุฑุงูฺฉ ู ุงูุฒุงุด ุงููุชุ ุญุชูุงู SSL/TLS ุฑุง ุฑู Nginx ูุนุงู ฺฉูุฏ.
- **ุณุฑูุณโูุง ูุฏุฑุชโุดุฏู (Managed Services):** ุจุฑุง ูพุงุฏุงุฑ ู ููุงุณโูพุฐุฑ ุจุดุชุฑุ ุชูุตู ูโุดูุฏ ุงุฒ ุฏุชุงุจุณ ู Redis ูุฏุฑุชโุดุฏู (ูุงููุฏ AWS RDS ุง ElastiCache) ุจู ุฌุง ุงุฌุฑุง ุขูโูุง ุฑู ููุงู ุณุฑูุฑ ุจุฑูุงูู ุงุณุชูุงุฏู ฺฉูุฏ.
- **ุฐุฎุฑูโุณุงุฒ ูุงูโูุง:** ูุงูโูุง ุงุณุชุงุชฺฉ ู ุฑุณุงููโูุง (media) ุฑุง ุฑู ฺฉ ุณุฑูุณ ุฐุฎุฑูโุณุงุฒ ุงุจุฑ ูุงููุฏ Amazon S3 ุง DigitalOcean Spaces ูุฑุงุฑ ุฏูุฏ ุชุง ุจุงุฑ ุงุฒ ุฑู ุณุฑูุฑ ุงุตู ุจุฑุฏุงุดุชู ุดูุฏ.

---

## ๐ค ูุดุงุฑฺฉุช (Contributing)

ุงุฒ ูุดุงุฑฺฉุช ุดูุง ุฏุฑ ุงู ูพุฑูฺู ุงุณุชูุจุงู ูโฺฉูู! ูุทูุงู ูุจู ุงุฒ ุงุฑุณุงู Pull Requestุ ููุงุฑุฏ ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏ:
1. ุงุฒ ูพุฑูฺู ฺฉ Fork ุชูู ฺฉูุฏ.
2. ฺฉ Branch ุฌุฏุฏ ุจุฑุง ุชุบุฑุงุช ุฎูุฏ ุงุฌุงุฏ ฺฉูุฏ (`git checkout -b feature/your-feature`).
3. ุชุบุฑุงุช ุฎูุฏ ุฑุง Commit ฺฉูุฏ (`git commit -m 'feat: Add some feature'`).
4. ุจู Branch ุงุตู Push ฺฉูุฏ (`git push origin feature/your-feature`).
5. ฺฉ Pull Request ุฌุฏุฏ ุจุงุฒ ฺฉูุฏ.

## ๐ ูุฌูุฒ (License)

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช. ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ูุงู [LICENSE](LICENSE) ุฑุง ูุทุงูุนู ฺฉูุฏ.
