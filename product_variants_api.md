# مستندات API واریانت‌های محصول

این مستندات، نحوه استفاده از API برای مدیریت واریانت‌های یک محصول را شرح می‌دهد. واریانت‌ها به شما اجازه می‌دهند تا ترکیبات مختلفی از یک محصول (مانند رنگ و سایز) را با قیمت و موجودی مجزا مدیریت کنید.

**URL پایه:** `/api/v1/`

---

## ۱. لیست کردن واریانت‌های یک محصول

این اندپوینت لیستی از تمام واریانت‌های مرتبط با یک محصول خاص را برمی‌گرداند.

-   **متد:** `GET`
-   **آدرس:** `/products/{product_id}/variants/`

#### پارامترها

| نام | نوع | موقعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| `product_id` | `UUID` | URL | شناسه محصولی که واریانت‌های آن را می‌خواهید. |

#### نمونه پاسخ موفق (Success Response)

-   **کد وضعیت:** `200 OK`

```json
[
  {
    "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
    "sku": "TS-BLK-M",
    "price": "250000.00",
    "stock": 50,
    "attributes": [
      {
        "attribute": "رنگ",
        "value": "مشکی"
      },
      {
        "attribute": "سایز",
        "value": "M"
      }
    ]
  },
  {
    "id": "b2c3d4e5-f6a7-8901-2345-67890abcdef1",
    "sku": "TS-BLK-L",
    "price": "250000.00",
    "stock": 35,
    "attributes": [
      {
        "attribute": "رنگ",
        "value": "مشکی"
      },
      {
        "attribute": "سایز",
        "value": "L"
      }
    ]
  }
]
```

---

## ۲. ایجاد یک واریانت جدید

این اندپوینت یک واریانت جدید برای یک محصول ایجاد می‌کند.

-   **متد:** `POST`
-   **آدرس:** `/products/{product_id}/variants/`

#### پارامترها

| نام | نوع | موقعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| `product_id` | `UUID` | URL | شناسه محصول والد. |

#### بدنه درخواست (Request Body)

```json
{
  "sku": "TS-RED-S",
  "price": "260000.00",
  "stock": 100,
  "attributes": [
    {
      "attribute_id": 1,
      "value": "قرمز"
    },
    {
      "attribute_id": 2,
      "value": "S"
    }
  ]
}
```
*   `attribute_id`: شناسه عددی ویژگی (مثلاً ۱ برای "رنگ" و ۲ برای "سایز").
*   `value`: مقدار ویژگی مورد نظر.

#### نمونه پاسخ موفق (Success Response)

-   **کد وضعیت:** `201 Created`

```json
{
  "id": "c3d4e5f6-a7b8-9012-3456-7890abcdef12",
  "sku": "TS-RED-S",
  "price": "260000.00",
  "stock": 100,
  "attributes": [
    {
      "attribute": "رنگ",
      "value": "قرمز"
    },
    {
      "attribute": "سایز",
      "value": "S"
    }
  ]
}
```

---

## ۳. دریافت اطلاعات یک واریانت خاص

این اندپوینت جزئیات کامل یک واریانت مشخص را برمی‌گرداند.

-   **متد:** `GET`
-   **آدرس:** `/products/{product_id}/variants/{variant_id}/`

#### پارامترها

| نام | نوع | موقعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| `product_id` | `UUID` | URL | شناسه محصول والد. |
| `variant_id` | `UUID` | URL | شناسه واریانت مورد نظر. |

#### نمونه پاسخ موفق (Success Response)

-   **کد وضعیت:** `200 OK`

```json
{
  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "sku": "TS-BLK-M",
  "price": "250000.00",
  "stock": 50,
  "attributes": [
    {
      "attribute": "رنگ",
      "value": "مشکی"
    },
    {
      "attribute": "سایز",
      "value": "M"
    }
  ]
}
```

---

## ۴. به‌روزرسانی یک واریانت

این اندپوینت به شما اجازه می‌دهد تا اطلاعات یک واریانت موجود را ویرایش کنید.

-   **متد:** `PUT` یا `PATCH`
-   **آدرس:** `/products/{product_id}/variants/{variant_id}/`

#### پارامترها

| نام | نوع | موقعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| `product_id` | `UUID` | URL | شناسه محصول والد. |
| `variant_id` | `UUID` | URL | شناسه واریانت مورد نظر. |

#### بدنه درخواست (Request Body)

شما می‌توانید یک یا چند فیلد را برای به‌روزرسانی ارسال کنید.

```json
{
  "price": "255000.00",
  "stock": 45
}
```

#### نمونه پاسخ موفق (Success Response)

-   **کد وضعیت:** `200 OK`

```json
{
  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "sku": "TS-BLK-M",
  "price": "255000.00",
  "stock": 45,
  "attributes": [
    {
      "attribute": "رنگ",
      "value": "مشکی"
    },
    {
      "attribute": "سایز",
      "value": "M"
    }
  ]
}
```

---

## ۵. حذف یک واریانت

این اندپوینت یک واریانت را از محصول حذف می‌کند.

-   **متد:** `DELETE`
-   **آدرس:** `/products/{product_id}/variants/{variant_id}/`

#### پارامترها

| نام | نوع | موقعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| `product_id` | `UUID` | URL | شناسه محصول والد. |
| `variant_id` | `UUID` | URL | شناسه واریانت مورد نظر. |

#### نمونه پاسخ موفق (Success Response)

-   **کد وضعیت:** `204 No Content`

در صورت موفقیت‌آمیز بودن عملیات، هیچ محتوایی در پاسخ بازگردانده نمی‌شود.
